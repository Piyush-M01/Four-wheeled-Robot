<?xml version="1.0"?>
<robot name="wheeled_bot">

<!-- colour specification --> 
<material name="black">
<color rgba="0.0 0.0 0.0 1.0"/>
</material>
<material name="blue">
<color rgba="0.203125 0.23828125 0.28515625 1.0"/>
</material>
<material name="green">
<color rgba="0.0 0.8 0.0 1.0"/>
</material>
<material name="grey">
<color rgba="0.2 0.2 0.2 1.0"/>
</material>
<material name="orange">
<color rgba="1.0 0.423529411765 0.0392156862745 1.0"/>
</material>
<material name="brown">
<color rgba="0.870588235294 0.811764705882 0.764705882353 1.0"/>
</material>
<material name="red">
<color rgba="0.80078125 0.12890625 0.1328125 1.0"/>
</material>
<material name="white">
<color rgba="1.0 1.0 1.0 1.0"/>
</material> 
<gazebo reference="base_link">
<material>Gazebo/Orange</material>
</gazebo>
<gazebo reference="link_left_wheel">
<material>Gazebo/Black</material>
</gazebo>
<gazebo reference="link_right_wheel">
<material>Gazebo/Black</material>
</gazebo>

<link name="base_link">
<!-- pose and inertial -->
<pose>0 0 0.1 0 0 0</pose>
<inertial>
<mass value="0.5"/>
<origin rpy="0 0 0" xyz="0 0.01 0"/>
<inertia ixx="0.00022083" ixy="0" ixz="0" iyy="0.00022083" iyz="0" izz="0.00040833"/>
</inertial>
<collision name="base_link_collision">
<origin rpy="0 0 0" xyz="0 0 -0.005"/>
<geometry>
<box size="0.07 0.07 0.02"/>
</geometry>
</collision>
<visual name="base_link_visual">
<origin rpy="0 0 0" xyz="0 0 -0.005"/>
<geometry>
<box size="0.07 0.07 0.02"/>
</geometry>
</visual>

</link>

<!-- Create wheel right --> 
<link name="link_right_wheel"> 
<inertial>
<mass value="0.2"/>
<origin rpy="0 1.5707 0" xyz="0 0 0"/>
<inertia ixx="2.3e-06" ixy="0" ixz="0" iyy="2.3e-06" iyz="0" izz="4.5e-06"/>
</inertial>
<collision name="link_right_wheel_collision">
<origin rpy="0 1.5707 0" xyz="0 0 0"/>
<geometry>
<cylinder length="0.01" radius="0.02"/>
</geometry>
</collision>
<visual name="link_right_wheel_visual">
<origin rpy="0 1.5707 0" xyz="0 0 0"/>
<geometry>
<cylinder length="0.01" radius="0.02"/>
</geometry> 
</visual>
</link>
<!-- Joint for right wheel -->
<joint name="joint_right_wheel" type="continuous">
<origin rpy="0 0 0" xyz="-0.04 0.02 0"/>
<child link="link_right_wheel" />
<parent link="base_link"/>
<axis rpy="0 0 0" xyz="1 0 0"/>
<limit effort="5" velocity="6"/>
<joint_properties damping="10000.0" friction="10000.0" />
</joint>

<!-- Left Wheel link -->
<link name="link_left_wheel"> 
<inertial>
<mass value="0.2"/>
<origin rpy="0 1.5707 0" xyz="0 0 0"/>
<inertia ixx="2.3e-06" ixy="0" ixz="0" iyy="2.3e-06" iyz="0" izz="4.5e-06"/>
</inertial>
<collision name="link_left_wheel_collision">
<origin rpy="0 1.5707 0" xyz="0 0 0"/>
<geometry>
<cylinder length="0.01" radius="0.02"/>
</geometry>
</collision>
<visual name="link_left_wheel_visual">
<origin rpy="0 1.5707 0" xyz="0 0 0"/>
<geometry>
<cylinder length="0.01" radius="0.02"/>
</geometry> 

</visual>
</link>
<!-- Joint for right wheel -->
<joint name="joint_left_wheel" type="continuous">
<origin rpy="0 0 0" xyz="0.04 0.02 0"/>
<child link="link_left_wheel" />
<parent link="base_link"/>
<axis rpy="0 0 0" xyz="1 0 0"/>
<limit effort="5" velocity="6"/>
<joint_properties damping="10000.0" friction="10000.0" />
</joint>

<link name="link_fwd_right_wheel"> 
<inertial>
<mass value="0.2"/>
<origin rpy="0 1.5707 0" xyz="0 0 0"/>
<inertia ixx="2.3e-06" ixy="0" ixz="0" iyy="2.3e-06" iyz="0" izz="4.5e-06"/>
</inertial>
<collision name="link_fwd_right_wheel_collision">
<origin rpy="0 1.5707 0" xyz="0 0 0"/>
<geometry>
<cylinder length="0.01" radius="0.02"/>
</geometry>
</collision>
<visual name="link_fwd_right_wheel_visual">
<origin rpy="0 1.5707 0" xyz="0 0 0"/>
<geometry>
<cylinder length="0.01" radius="0.02"/>
</geometry> 
</visual>
</link>
<!-- Joint for right wheel -->
<joint name="joint_fwd_right_wheel" type="continuous">
<origin rpy="0 0 0" xyz="0.04 -0.025 0"/>
<child link="link_fwd_right_wheel" />
<parent link="base_link"/>
<axis rpy="0 0 0" xyz="1 0 0"/>
<limit effort="5" velocity="6"/>
<joint_properties damping="10000.0" friction="10000.0" />
</joint>

<!-- Left Wheel link -->
<link name="fwd_link_left_wheel"> 
<inertial>
<mass value="0.2"/>
<origin rpy="0 1.5707 0" xyz="0 0 0"/>
<inertia ixx="2.3e-06" ixy="0" ixz="0" iyy="2.3e-06" iyz="0" izz="4.5e-06"/>
</inertial>
<collision name="link_fwd_left_wheel_collision">
<origin rpy="0 1.5707 0" xyz="0 0 0"/>
<geometry>
<cylinder length="0.01" radius="0.02"/>
</geometry>
</collision>
<visual name="link_fwd_left_wheel_visual">
    
    <origin rpy="0 1.5707 0" xyz="0 0 0"/>
    <geometry>
        <cylinder length="0.01" radius="0.02"/>
    </geometry> 
    <material name="Cyan">
       <color rgba="0 1.0 1.0 1.0"/>
    </material>
</visual>
</link>
<!-- Joint for right wheel -->
<joint name="fwd_joint_left_wheel" type="continuous">
<origin rpy="0 0 0" xyz="-0.04 -0.025 0"/>
<child link="fwd_link_left_wheel" />
<parent link="base_link"/>
<axis rpy="0 0 0" xyz="1 0 0"/>
<limit effort="5" velocity="6"/>
<joint_properties damping="10000.0" friction="10000.0" />
</joint>

<joint name="camera_joint" type="fixed">
    <parent link="base_link"/>
    <child link="camera_link"/>
	<origin xyz="0 0 0.075" rpy="0 0 0"/>
  </joint>

  	<gazebo reference="camera_link">
		<sensor type="depth" name="camera">
			<update_rate>30</update_rate>
			<camera name="head">
				<horizontal_fov>1.547198</horizontal_fov>
				<vertical_fov>1.5422901111111111</vertical_fov>
				<image>
					<width>640</width>
					<height>480</height>
					<format>R8G8B8</format>
				</image>
				<clip>
					<near>0.05</near>
					<far>3</far>
				</clip>
			</camera>
				<plugin name="camera_controller" filename="libgazebo_ros_openni_kinect.so">
					<baseline>0.2</baseline>
					<alwaysOn>true</alwaysOn>
					<updateRate>30</updateRate>
					<cameraName>my_robot/camera</cameraName>
					<imageTopicName>image_raw</imageTopicName>
					<cameraInfoTopicName>/camera_info</cameraInfoTopicName>
					<depthImageTopicName>/my_robot/camera/depth/image_raw</depthImageTopicName>
      				<depthImageInfoTopicName>/my_robot/camera/depth/camera_info</depthImageInfoTopicName>
					<pointCloudTopicName>/my_robot/camera/depth/points</pointCloudTopicName>
					<frameName>camera_link</frameName>
					<pointCloudCutoff>0.5</pointCloudCutoff>
      				<pointCloudCutoffMax>3.0</pointCloudCutoffMax>
					<distortionK1>0.00000001</distortionK1>
					<distortionK2>0.00000001</distortionK2>
					<distortionK3>0.00000001</distortionK3>
					<distortionT1>0.00000001</distortionT1>
					<distortionT2>0.00000001</distortionT2>
					<CxPrime>0</CxPrime>
					<Cx>0</Cx>
					<Cy>0</Cy>
					<focalLength>0</focalLength>
					<hackBaseline>0</hackBaseline>
				</plugin>
		</sensor>
  	</gazebo>

   <gazebo>
	<plugin filename="libgazebo_ros_skid_steer_drive.so" name="steer_drive_controller">
      <alwaysOn>true</alwaysOn>
      <updateRate>20</updateRate>
      <leftFrontJoint>fwd_joint_left_wheel</leftFrontJoint>
      <rightRearJoint>joint_fwd_right_wheel</rightRearJoint>
      <leftRearJoint>joint_left_wheel</leftRearJoint>
      <rightFrontJoint>joint_right_wheel</rightFrontJoint>
      <wheelSeparation>1.2</wheelSeparation>
      <wheelDiameter>0.4</wheelDiameter>
      <torque>100</torque>
      <covariance_x> 0.000100</covariance_x>
      <covariance_y> 0.000100</covariance_y>
      <covariance_yaw>0.0100 </covariance_yaw>
      <commandTopic>cmd_vel</commandTopic>
      <odometryTopic>odom</odometryTopic>
      <odometryFrame>odom</odometryFrame>
      <broadcastTF>true</broadcastTF>
      <robotBaseFrame>base_link</robotBaseFrame>
    </plugin>
	</gazebo>

</robot>